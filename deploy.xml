<?xml version="1.0" encoding="UTF-8"?>
<deploydescriptor>
	<global>
		<version>156</version>
		<patchlevel>8</patchlevel>		
		<id>enhancedretrieval</id>
		<vendor>ontoprise GmbH</vendor>
		<maintainer>ontoprise GmbH</maintainer>
		<license>GPL-v2</license>
		<instdir>extensions/EnhancedRetrieval</instdir>
		<description>A client for the lucene wiki server.</description>
		<helpurl>http://smwforum.ontoprise.com/smwforum/index.php/Help:Enhanced_Retrieval_Extension
		</helpurl>
		<dependencies>
			<dependency from="1150" to="1169">mw</dependency>
			<dependency from="101" to="156">scriptmanager</dependency>
            <depencency from="156" to="156">smwhalo</depencency>
		</dependencies>
	</global>
	<codefiles>

		<file loc="deploy.xml" />
		<!-- TODO: add all others -->
	</codefiles>
	<wikidumps>
		<!-- empty -->
	</wikidumps>
	<resources>
		<!-- empty -->
	</resources>

	<configs>

		<new>
			<require name="us_init"
				file="extensions/EnhancedRetrieval/includes/EnhancedRetrieval.php" />
			<php name="Solr Configuration">
$fsgFacetedSearchConfig = array(
    'indexer' => 'SOLR',
    'source'  => 'SMWDB',
    'host'    => $wgServer,
	'servlet' => "$wgScriptPath/extensions/EnhancedRetrieval/includes/FacetedSearch/solrproxy.php"
);
			</php>
			<script file="maintenance/setup.php" params="" />
		</new>
		<update from="136">
		    <replace>
		      <search>extensions/UnifiedSearch/OAI/OAIRepo.php</search>
		      <replacement>extensions/EnhancedRetrieval/OAI/OAIRepo.php</replacement>
		    </replace>
			<replace>
              <search>extensions/UnifiedSearch/includes/UnifiedSearch.php</search>
              <replacement>extensions/EnhancedRetrieval/includes/EnhancedRetrieval.php</replacement>
            </replace>
		</update>
		<update from="156" removeAll="true">
			<require name="us_init"
				file="extensions/EnhancedRetrieval/includes/EnhancedRetrieval.php" />
			<php name="Solr Configuration">
$fsgFacetedSearchConfig = array(
    'indexer' => 'SOLR',
    'source'  => 'SMWDB',
    'host'    => $wgServer,
	'servlet' => "$wgScriptPath/extensions/EnhancedRetrieval/includes/FacetedSearch/solrproxy.php"
);
			</php>
		</update>
		<update from="patchlevel" removeAll="true">
			<require name="us_init"
				file="extensions/EnhancedRetrieval/includes/EnhancedRetrieval.php" />
			<php name="Solr Configuration">
$fsgFacetedSearchConfig = array(
    'indexer' => 'SOLR',
    'source'  => 'SMWDB',
    'host'    => $wgServer,
	'servlet' => "$wgScriptPath/extensions/EnhancedRetrieval/includes/FacetedSearch/solrproxy.php"
);
			</php>
		</update>
		<uninstall>
			<script file="maintenance/setup.php" params="--delete" />
		</uninstall>
	</configs>
</deploydescriptor>

